<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <title>éŠæˆ²èªªæ˜ - é€²æ“Šçš„èŸ‘è‚æˆ°é¬¥éŠæˆ²</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    /* ===== ç¥ç§˜é»‘åº•ï¼šåªå½±éŸ¿æœ¬é  ===== */
    body {
      margin: 0;
      color: #fff;
      background: #000;        /* å¼·åˆ¶é»‘åº• */
      position: relative;      /* çµ¦ ::before ç–Šå±¤ç”¨ */
      overflow-x: hidden;
    }
    /* èƒŒæ™¯æšˆå½± + å¾®äº®ä¸­å¿ƒ */
    body::before{
      content:"";
      position: fixed;
      inset: 0;
      z-index: -1;
      background:
        radial-gradient(80% 60% at 50% 35%, rgba(255,255,255,0.06) 0%, rgba(0,0,0,0) 60%),
        radial-gradient(120% 80% at 50% 120%, rgba(0,0,0,0.85) 10%, rgba(0,0,0,1) 70%);
      background-blend-mode: screen, normal;
    }

    /* ===== Skip linkï¼šé è¨­è—å¥½ï¼Œèšç„¦æ»‘å…¥ ===== */
    a.skip-link{
      position: fixed;
      left: 16px;
      top: 12px;
      transform: translateY(-150%);
      background:#000; color:#fff;
      padding:.5rem .75rem; border-radius:10px;
      border:2px solid #ffd166;
      box-shadow:0 4px 18px rgba(0,0,0,.45);
      z-index:10000;
      transition: transform .18s ease, box-shadow .18s ease;
    }
    a.skip-link:focus, a.skip-link:focus-visible{
      transform: translateY(0);
      outline: none;
      box-shadow:0 6px 24px rgba(0,0,0,.6);
    }

    /* ===== ä¸»è¦å®¹å™¨ï¼šç»ç’ƒæ„Ÿå¡ç‰‡ ===== */
    main {
      max-width: 1000px;
      margin: 3rem auto;
      padding: 1.25rem;
      background: rgba(255,255,255,0.06);
      border: 1px solid rgba(255,255,255,0.15);
      border-radius: 16px;
      backdrop-filter: blur(4px);
      box-shadow: 0 10px 40px rgba(0,0,0,0.5);
      opacity: 0;                  /* ä¸»å…§å®¹æ·¡å…¥ */
      animation: fadeInMain .7s ease-out forwards;
    }
    @keyframes fadeInMain { to { opacity: 1; } }

    /* ========= è£å‚™å¡ç‰‡å€å¡Šï¼ˆä¸ŠåŠéƒ¨ï¼‰ ========= */
    .equip { margin-top: 1.25rem; }
    .equip h2 {
      margin: 0 0 .4rem;
      position: relative;
      text-shadow: 0 2px 10px rgba(0,0,0,.7);
    }
    .equip h2::after {
      content: "";
      display: block;
      width: 140px;
      height: 3px;
      margin-top: .45rem;
      background: linear-gradient(90deg, #ffd166, rgba(255,209,102,0));
      border-radius: 2px;
    }

    .equip-grid {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 2rem;                 /* å¡ç‰‡é–“è· */
      margin-top: 1rem;
    }

    .item {
      flex: 1 1 240px;           /* æ¯å¼µå¡ç‰‡æœ€å°å¯¬ï¼Œè‡ªå‹•æ›è¡Œ */
      max-width: 280px;
      text-align: left;
      background: rgba(255,255,255,0.08);                 /* èª¿äº®ä¸€é»é…é»‘åº• */
      border: 1px solid rgba(255,255,255,0.18);
      border-radius: 14px;
      padding: 1rem;
      backdrop-filter: blur(4px);
      box-shadow: 0 3px 10px rgba(0,0,0,0.35);
      transition: transform .2s ease;
    }
    .item:hover { transform: translateY(-3px); }

    .item figure { margin: 0; }
    .item img {
      max-width: 240px;          /* åœ–ç‰‡æ”¾å¤§ */
      width: 100%;
      height: auto;
      border-radius: 10px;
      margin: 0 auto 0.8rem;
      display: block;
      background: rgba(255,255,255,0.08);
      padding: .35rem;
    }
    .item figcaption { font-weight: 700; margin-bottom: .25rem; }

    /* ========= å…¶å®ƒå€å¡Š ========= */
    .sr-actions{
      display:flex; gap:.5rem; flex-wrap:wrap; align-items:center;
      margin:.25rem 0 1rem;
    }
    .sr-btn{
      appearance:none; border:1px solid rgba(255,255,255,.28);
      background:rgba(255,255,255,.12); color:#fff; border-radius:10px;
      padding:.35rem .6rem; cursor:pointer;
    }
    .sr-btn:focus-visible{ outline:2px solid #ffd166; outline-offset:2px; }

    ul { line-height: 1.8; margin: .4rem 0 0; }
    #startBtn {
      margin-top: 2rem;
      font-size: 1.2rem;
      padding: 0.5rem 1.5rem;
      border-radius: 999px;
      font-weight: 700;
      cursor: pointer;
    }

    /* è¢å¹•å ±è®€ç”¨ç‹€æ…‹å€ï¼ˆä¸ä½”ç‰ˆé¢ï¼‰ */
    .sr-only {
      position:absolute!important; width:1px;height:1px; padding:0;margin:-1px;
      overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0;
    }
  </style>
</head>
<body class="guide">
  <a href="#main" class="skip-link">è·³åˆ°ä¸»å…§å®¹</a>

  <main id="main">
    <h1>éŠæˆ²èªªæ˜</h1>

    <section class="equip" aria-labelledby="equipTitle">
      <h2 id="equipTitle">å‹‡è€…çš„åˆå§‹è£å‚™</h2>
      <div class="sr-actions">
        <button class="sr-btn" id="readEquip" aria-keyshortcuts="1">æœ—è®€æœ¬ç¯€ï¼ˆå¿«æ·éµ 1ï¼‰</button>
        <span id="srStatus" class="sr-only" aria-live="polite"></span>
      </div>

      <div class="equip-grid">
        <div class="item">
          <figure>
            <img src="assets/images/weapons/firegun.png"
                 alt="ä¸€æŠŠå™´ç«æ§æ­£åœ¨ç«çƒ¤èŸ‘è‚çš„ç•«é¢ã€‚">
            <figcaption tabindex="0">
              <span class="sr-only">å™´ç«æ§</span>
            </figcaption>
          </figure>
          <p>ğŸ”¥ å™´ç«æ§ï¼šèµ·å§‹å€¼æœ‰ 10 æ¬¡ï¼Œè®“èŸ‘è‚å€‘è®Šæˆçƒ¤å°å¼·ã€‚</p>
        </div>
        <div class="item">
          <figure>
            <img src="assets/images/weapons/spray.png"
                 alt="ä¸€ç½é¦™æ°›å™´éœ§æ­£åœ¨å™´èŸ‘è‚ï¼ŒèŸ‘è‚å€‘å€’åœ°æŠ½æçš„ç•«é¢ã€‚">
            <figcaption tabindex="0">
              <span class="sr-only">é¦™æ°›å™´éœ§</span>
            </figcaption>
          </figure>
          <p>ğŸŒ¸ é¦™æ°›å™´éœ§ï¼šèµ·å§‹å€¼æœ‰ 10 æ¬¡ï¼Œäººé¡è¦ºå¾—é¦™ï¼ŒèŸ‘è‚èäº†è¶…æƒ³åã€‚</p>
        </div>
        <div class="item">
          <figure>
            <img src="assets/images/weapons/slipper.png"
                 alt="è—ç™½æ‹–æ‰“ä¸­èŸ‘è‚å™´æ±çš„ç•«é¢ã€‚">
            <figcaption tabindex="0">
              <span class="sr-only">è—ç™½æ‹–</span>
            </figcaption>

          </figure>
          <p>ğŸ©´ è—ç™½æ‹–ï¼šè¿‘è·é›¢å¿…æ®ºï¼Œå‘½ä¸­ç¬é–“çˆ†æ“Šå™´æ±ï¼Œèµ·å§‹å€¼å¯ä½¿ç”¨ 10 æ¬¡ã€‚</p>
        </div>
      </div>
    </section>

    <section aria-labelledby="controlTitle">
      <h2 id="controlTitle">æ“ä½œæ–¹å¼</h2>
      <div class="sr-actions">
        <button class="sr-btn" id="readControl" aria-keyshortcuts="2">æœ—è®€æœ¬ç¯€ï¼ˆå¿«æ·éµ 2ï¼‰</button>
      </div>
      <ul id="controlList">
        <li>ç§»å‹•è§’è‰²ä½ç½®ï¼šä½¿ç”¨ç®­é ­ â† ã€ â†’ ã€ â†‘ ã€ â†“</li>
        <li>æƒæç›®å‰å€åŸŸæ˜¯å¦æœ‰èŸ‘è‚ï¼šç©ºç™½éµ</li>
        <li>åˆ‡æ›æ­¦å™¨ï¼šæ•¸å­— 1 å™´ç«æ§ã€æ•¸å­— 2 é¦™æ°›å™´éœ§ã€æ•¸å­— 3 è—ç™½æ‹–ï¼Œ4 åˆ° 7 æ•¸å­—éµåœ¨ç¬¬å››ã€äº”é—œä¾åºè§£é–ã€‚</li>
        <li>ç™¼å‹•æ”»æ“Šï¼šEnter éµ</li>
        <li>èªéŸ³æœ—è®€ç©å®¶ç›®å‰ç‹€æ…‹ï¼šShift + S</li>
        <li>åˆ‡æ›ç•«é¢èˆ‡ç´”è½è¦ºæ“ä½œæ¨¡å¼ï¼šShift + M</li>
      </ul>
    </section>

    <section aria-labelledby="tipsTitle">
      <h2 id="tipsTitle">é‡è¦æç¤º</h2>
      <div class="sr-actions">
        <button class="sr-btn" id="readTips" aria-keyshortcuts="3">æœ—è®€æœ¬ç¯€ï¼ˆå¿«æ·éµ 3ï¼‰</button>
      </div>
      <ul id="tipsList">
        <li>éŠæˆ²å…±äº”é—œï¼Œé›£åº¦æœƒæ„ˆä¾†æ„ˆé«˜ï¼Œå‡ºç¾çš„èŸ‘è‚ç¨®é¡ä¹Ÿæœƒå¢åŠ ï¼Œæ„ˆé›£å°ä»˜ã€‚</li>
        <li>ä¸åŒèŸ‘è‚æ€•çš„æ­¦å™¨ä¸åŒï¼Œè«‹ç•™æ„æ¯é—œé–‹é ­çš„èªªæ˜ï¼Œè¦è°æ˜é¸æ“‡ï¼</li>
        <li>æ”»æ“Šå¤±èª¤æœƒè¢«èŸ‘è‚åæ“Šï¼Œå°å¿ƒæ‰£è¡€æˆ–æå¤±é‡‘å¹£ã€‚</li>
        <li>è‹¥åœ¨æœ‰ç‰¹æ®Šéšœç¤™ç‰©çš„æƒ…å¢ƒï¼Œä¹Ÿè«‹å°å¿ƒæ‰£è¡€æˆ–æå¤±é‡‘å¹£ã€‚</li>
        <li>è¡€é‡æ­¸é›¶æˆ–è¢«èŸ‘è‚ç‹ å’¬ 5 æ¬¡ï¼ŒéŠæˆ²å°±æœƒçµæŸã€‚</li>
      </ul>
    </section>
            <!-- NVDA ä½¿ç”¨å»ºè­°ï¼ˆåƒ…æœ¬é é¡¯ç¤ºä¸€æ¬¡ï¼‰ -->
    <section aria-labelledby="nvdaTitle">
      <h2 id="nvdaTitle">NVDA ä½¿ç”¨å»ºè­°</h2>
      <div class="sr-actions">
        <button class="sr-btn" id="readNVDA" aria-keyshortcuts="4">æœ—è®€æœ¬ç¯€ï¼ˆå¿«æ·éµ 4ï¼‰</button>
      </div>
      <ul id="nvdaTips">
        <li>é€²å…¥é—œå¡å¾Œï¼Œè«‹æŒ‰ <kbd>NVDA</kbd> + <kbd>ç©ºç™½éµ</kbd> åˆ‡æ›åˆ°ã€Œç„¦é»æ¨¡å¼ã€ï¼Œå†ç”¨æ–¹å‘éµæ“ä½œã€‚</li>
        <li>è‹¥è¦ºå¾—å ±è®€å¤ªåµï¼Œå¯æŒ‰ <kbd>NVDA</kbd> + <kbd>S</kbd> åœ¨ã€Œæœ—è®€ï¼æç¤ºéŸ³ï¼éœéŸ³ã€é–“åˆ‡æ›ã€‚</li>
        <li>éŠæˆ²å…§å»ºçš„ TTS æœƒå ±è®€èŸ‘è‚åº§æ¨™èˆ‡é—œéµäº‹ä»¶ï¼›NVDA å ±è®€åªæ˜¯è¼”åŠ©ï¼Œå¹²æ“¾æ™‚å¯æš«æ™‚é—œé–‰ã€‚</li>
      </ul>
    </section>

    <button id="startBtn" aria-describedby="startDesc">éŠæˆ²é–‹å§‹å‰å…ˆä¾†èªè­˜æ•µäºº</button>
    <span id="startDesc" class="sr-only">æŒ‰ä¸‹å°‡å‰å¾€èŸ‘è‚åœ–é‘‘èˆ‡æ•™å­¸é ã€‚</span>
  </main>

  <!-- èƒŒæ™¯éŸ³æ¨‚ï¼ˆèªªæ˜é å°ˆç”¨ï¼‰ -->
  <audio id="bgm" src="assets/sounds/tutorial_theme.mp3" loop preload="auto"></audio>

<script>
  // ===== å¯é¸çš„èªéŸ³åˆæˆï¼ˆæä¾›éµç›¤å¿«é€Ÿæœ—è®€ï¼‰=====
  function speak(text){
    if (!('speechSynthesis' in window) || !text) return;
    try{
      speechSynthesis.cancel();
      const u = new SpeechSynthesisUtterance(text);
      u.lang = "zh-TW"; u.rate = 1.5; u.pitch = 1.0; u.volume = 1.0;
      speechSynthesis.speak(u);
    }catch(_){}
  }
  function sectionText(el){
    if (!el) return "";
    // æŠ“å–è©²ç¯€çš„æ–‡å­—ï¼ˆæ¨™é¡Œ + åˆ—è¡¨/æ®µè½ï¼‰
    let t = "";
    const h2 = el.querySelector('h2');
    if (h2) t += h2.textContent + "ã€‚";
    const ps = el.querySelectorAll('p, li');
    ps.forEach(p => t += p.textContent + "ã€‚");
    return t;
  }
  function live(msg){
    const sr = document.getElementById('srStatus');
    if (sr) sr.textContent = msg || "";
  }

  // æœ—è®€å„ç¯€ï¼šæŒ‰éˆ• + æ•¸å­—éµ
  const secEquip = document.querySelector('.equip');
  const secCtrl  = document.querySelector('[aria-labelledby="controlTitle"]');
  const secTips  = document.querySelector('[aria-labelledby="tipsTitle"]');
  document.getElementById('readEquip')?.addEventListener('click', ()=>{
    const txt = sectionText(secEquip); speak(txt); live('å·²æœ—è®€ï¼šåˆå§‹è£å‚™ã€‚');
  });
  document.getElementById('readControl')?.addEventListener('click', ()=>{
    const txt = sectionText(secCtrl); speak(txt); live('å·²æœ—è®€ï¼šæ“ä½œæ–¹å¼ã€‚');
  });
  document.getElementById('readTips')?.addEventListener('click', ()=>{
    const txt = sectionText(secTips); speak(txt); live('å·²æœ—è®€ï¼šé‡è¦æç¤ºã€‚');
  });

  const secNVDA = document.querySelector('[aria-labelledby="nvdaTitle"]');
  document.getElementById('readNVDA')?.addEventListener('click', ()=>{
    const txt = sectionText(secNVDA); speak(txt); live('å·²æœ—è®€ï¼šNVDA ä½¿ç”¨å»ºè­°ã€‚');
  });

  document.addEventListener('keydown', (e)=>{
    if (e.altKey || e.ctrlKey || e.metaKey) return;
    if (e.key === '1') { e.preventDefault(); document.getElementById('readEquip')?.click(); }
    else if (e.key === '2') { e.preventDefault(); document.getElementById('readControl')?.click(); }
    else if (e.key === '3') { e.preventDefault(); document.getElementById('readTips')?.click(); }
    else if (e.key === '4') { e.preventDefault(); document.getElementById('readNVDA')?.click(); }
  });

  // ===== èƒŒæ™¯éŸ³æ¨‚ï¼šäº’å‹•å¾Œæ’­æ”¾ + æ·¡å…¥ï¼ˆä¿ç•™ï¼‰=====
  (function () {
    const bgm = document.getElementById("bgm");
    if (!bgm) return;

    let armed = false;
    function fadeInAudio(audio, target = 0.6, durMs = 900) {
      audio.volume = 0;
      const steps = 18, delta = target / steps, stepMs = Math.ceil(durMs / steps);
      let i = 0;
      const timer = setInterval(() => {
        i++;
        audio.volume = Math.min(target, audio.volume + delta);
        if (i >= steps) clearInterval(timer);
      }, stepMs);
    }
    function armAndPlay() {
      if (armed) return;
      armed = true;
      bgm.play().then(() => { fadeInAudio(bgm, 0.6, 900); }).catch(()=>{});
    }
    document.addEventListener("click", armAndPlay, { once: true });
    document.addEventListener("keydown", armAndPlay, { once: true });
    document.addEventListener("touchstart", armAndPlay, { once: true, passive: true });
    window.addEventListener("beforeunload", () => { try { bgm.pause(); } catch(e) {} });
  })();

  // ===== é–‹å§‹éŠæˆ²æŒ‰éˆ• =====
  document.getElementById("startBtn").addEventListener("click", () => {
    window.location.href = "bugs_guide.html";
  });
</script>

</body>
</html>
